@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

LAYOUT_WITH_LEGEND()

title Container Diagram - Carmen.NET ERP

Person(user, "User", "Business user, Manager, Accountant")
Person(admin, "Administrator", "System admin")

System_Boundary(carmen, "Carmen.NET") {
    Container(webapp, "Web Application", "ASP.NET MVC", "User interface\nDashboards, Forms, Reports")
    Container(webapi, "Web API", "ASP.NET Web API", "REST API layer\n60 controllers\n351+ endpoints")
    Container(functions, "Business Logic", ".NET Class Libraries", "Business rules & workflows\nValidation, Calculations\nApproval processes")
    ContainerDb(db, "Database", "SQL Server", "Multi-tenant data storage\n597 business entities\nTransactional data")
    Container(licenseApi, "License API", "ASP.NET Web API", "License validation\nTenant management")
    Container(crypto, "Crypto Services", ".NET Library", "Encryption/Decryption\nData security")
}

System_Ext(excel, "Excel Add-in", "Office integration")

Rel(user, webapp, "Uses", "HTTPS")
Rel(user, excel, "Uses", "Office")
Rel(webapp, webapi, "Calls", "HTTPS/JSON")
Rel(excel, webapi, "Calls", "REST API/JSON")
Rel(admin, webapi, "Configures", "HTTPS/JSON")
Rel(webapi, functions, "Uses")
Rel(functions, db, "Reads/Writes", "ADO.NET/EF")
Rel(webapi, licenseApi, "Validates license", "HTTPS")
Rel(functions, crypto, "Encrypts/Decrypts", "In-process")

SHOW_LEGEND()
@enduml
